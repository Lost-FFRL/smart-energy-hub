# Smart Energy Hub æ¶æ„è®¾è®¡æ–‡æ¡£

## ğŸ“‹ æ¦‚è¿°

æœ¬æ–‡æ¡£è¯¦ç»†æè¿°äº† Smart Energy Hub é¡¹ç›®çš„ç³»ç»Ÿæ¶æ„è®¾è®¡ï¼ŒåŒ…æ‹¬æŠ€æœ¯é€‰å‹ã€æ¨¡å—åˆ’åˆ†ã€æ•°æ®æµå‘ã€æ¥å£è®¾è®¡ç­‰æ ¸å¿ƒå†…å®¹ã€‚

## ğŸ¯ è®¾è®¡ç›®æ ‡

### æ ¸å¿ƒç›®æ ‡
- **é«˜æ€§èƒ½**: æ”¯æŒå¤§é‡è®¾å¤‡å¹¶å‘æ•°æ®å¤„ç†
- **é«˜å¯ç”¨**: 99.9% ç³»ç»Ÿå¯ç”¨æ€§ä¿è¯
- **å¯æ‰©å±•**: æ”¯æŒæ°´å¹³æ‰©å±•å’Œå‚ç›´æ‰©å±•
- **æ˜“ç»´æŠ¤**: æ¨¡å—åŒ–è®¾è®¡ï¼Œä¾¿äºå¼€å‘å’Œç»´æŠ¤
- **å®‰å…¨æ€§**: å®Œå–„çš„æƒé™æ§åˆ¶å’Œæ•°æ®å®‰å…¨

### éåŠŸèƒ½æ€§éœ€æ±‚
- **å¹¶å‘å¤„ç†**: æ”¯æŒ 10,000+ è®¾å¤‡åŒæ—¶åœ¨çº¿
- **å“åº”æ—¶é—´**: API å“åº”æ—¶é—´ < 200ms
- **æ•°æ®åå**: æ”¯æŒæ¯ç§’ 10,000+ æ¡æ•°æ®å†™å…¥
- **å­˜å‚¨å®¹é‡**: æ”¯æŒ TB çº§æ•°æ®å­˜å‚¨
- **å¯ç”¨æ€§**: 7Ã—24 å°æ—¶ä¸é—´æ–­æœåŠ¡

## ğŸ—ï¸ ç³»ç»Ÿæ¶æ„

### æ•´ä½“æ¶æ„å›¾

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                        å®¢æˆ·ç«¯å±‚ (Client Layer)                    â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚   Web Browser   â”‚   Mobile App    â”‚      Third-party API        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                â”‚
                                â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                      æ¥å…¥å±‚ (Gateway Layer)                      â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚   Load Balancer â”‚      Nginx      â”‚         API Gateway         â”‚
â”‚    (HAProxy)    â”‚   (Static Web)  â”‚      (Rate Limiting)        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                â”‚
                                â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                      åº”ç”¨å±‚ (Application Layer)                   â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  Web Controller â”‚  Device Manager â”‚      Data Processor         â”‚
â”‚   (REST API)    â”‚   (MQTT/HTTP)   â”‚    (Real-time Analysis)     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                â”‚
                                â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                      æœåŠ¡å±‚ (Service Layer)                      â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  Device Service â”‚   Data Service  â”‚      Analytics Service      â”‚
â”‚  User Service   â”‚  Alert Service  â”‚      Scheduler Service      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                â”‚
                                â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                      æ•°æ®å±‚ (Data Layer)                         â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚     MySQL       â”‚      Redis      â”‚       Time Series DB       â”‚
â”‚  (Master/Slave) â”‚    (Cache)      â”‚      (InfluxDB/TDengine)    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### æŠ€æœ¯æ¶æ„æ ˆ

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                          å‰ç«¯æŠ€æœ¯æ ˆ                              â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚     Vue.js 3    â”‚    TypeScript   â”‚         Element Plus        â”‚
â”‚     Vite        â”‚      Pinia      â”‚           ECharts           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                          åç«¯æŠ€æœ¯æ ˆ                              â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚   Spring Boot   â”‚   Spring MVC    â”‚       Spring Security       â”‚
â”‚  MyBatis-Plus   â”‚    Sa-Token     â”‚         Swagger 3           â”‚
â”‚     Lombok      â”‚    Validation   â”‚          Jackson            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                          æ•°æ®æŠ€æœ¯æ ˆ                              â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚     MySQL 8     â”‚     Redis 7     â”‚         InfluxDB            â”‚
â”‚   HikariCP      â”‚   Redisson      â”‚          Flyway             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                        åŸºç¡€è®¾æ–½æŠ€æœ¯æ ˆ                             â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚     Docker      â”‚   Kubernetes    â”‚         Prometheus          â”‚
â”‚     Nginx       â”‚      ELK        â”‚           Grafana           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## ğŸ§© æ¨¡å—è®¾è®¡

### æ ¸å¿ƒæ¨¡å—åˆ’åˆ†

```
smart-energy-hub/
â”œâ”€â”€ seh-common/              # å…¬å…±æ¨¡å—
â”‚   â”œâ”€â”€ seh-common-core/      # æ ¸å¿ƒå·¥å…·ç±»
â”‚   â”œâ”€â”€ seh-common-security/  # å®‰å…¨ç»„ä»¶
â”‚   â”œâ”€â”€ seh-common-redis/     # Redis ç»„ä»¶
â”‚   â””â”€â”€ seh-common-swagger/   # API æ–‡æ¡£ç»„ä»¶
â”œâ”€â”€ seh-framework/           # æ¡†æ¶æ¨¡å—
â”‚   â”œâ”€â”€ seh-spring-boot-starter/ # è‡ªåŠ¨é…ç½®
â”‚   â””â”€â”€ seh-web/             # Web æ¡†æ¶å°è£…
â”œâ”€â”€ seh-system/              # ç³»ç»Ÿç®¡ç†æ¨¡å—
â”‚   â”œâ”€â”€ seh-system-api/      # ç³»ç»Ÿ API
â”‚   â””â”€â”€ seh-system-biz/      # ç³»ç»Ÿä¸šåŠ¡é€»è¾‘
â”œâ”€â”€ seh-device/              # è®¾å¤‡ç®¡ç†æ¨¡å—
â”‚   â”œâ”€â”€ seh-device-api/      # è®¾å¤‡ API
â”‚   â”œâ”€â”€ seh-device-biz/      # è®¾å¤‡ä¸šåŠ¡é€»è¾‘
â”‚   â””â”€â”€ seh-device-protocol/ # è®¾å¤‡åè®®
â”œâ”€â”€ seh-data/                # æ•°æ®å¤„ç†æ¨¡å—
â”‚   â”œâ”€â”€ seh-data-api/        # æ•°æ® API
â”‚   â”œâ”€â”€ seh-data-biz/        # æ•°æ®ä¸šåŠ¡é€»è¾‘
â”‚   â”œâ”€â”€ seh-data-collector/  # æ•°æ®é‡‡é›†
â”‚   â””â”€â”€ seh-data-analytics/  # æ•°æ®åˆ†æ
â”œâ”€â”€ seh-energy/              # èƒ½æºç®¡ç†æ¨¡å—
â”‚   â”œâ”€â”€ seh-energy-api/      # èƒ½æº API
â”‚   â”œâ”€â”€ seh-energy-biz/      # èƒ½æºä¸šåŠ¡é€»è¾‘
â”‚   â””â”€â”€ seh-energy-scheduler/ # èƒ½æºè°ƒåº¦
â””â”€â”€ seh-gateway/             # ç½‘å…³æ¨¡å—
    â”œâ”€â”€ seh-gateway-web/     # Web ç½‘å…³
    â””â”€â”€ seh-gateway-device/  # è®¾å¤‡ç½‘å…³
```

### æ¨¡å—ä¾èµ–å…³ç³»

```mermaid
graph TD
    A[seh-gateway] --> B[seh-system]
    A --> C[seh-device]
    A --> D[seh-data]
    A --> E[seh-energy]
    
    B --> F[seh-framework]
    C --> F
    D --> F
    E --> F
    
    F --> G[seh-common]
    
    C --> H[seh-device-protocol]
    D --> I[seh-data-collector]
    D --> J[seh-data-analytics]
    E --> K[seh-energy-scheduler]
```

## ğŸ“Š æ•°æ®æ¶æ„

### æ•°æ®åº“è®¾è®¡

#### ä¸»æ•°æ®åº“ (MySQL)

**æ ¸å¿ƒä¸šåŠ¡è¡¨**:
```sql
-- è®¾å¤‡ä¿¡æ¯è¡¨
CREATE TABLE device_info (
    id BIGINT PRIMARY KEY AUTO_INCREMENT,
    device_code VARCHAR(50) UNIQUE NOT NULL COMMENT 'è®¾å¤‡ç¼–ç ',
    device_name VARCHAR(100) NOT NULL COMMENT 'è®¾å¤‡åç§°',
    device_type ENUM('PUMP', 'LIGHTING', 'SENSOR') NOT NULL COMMENT 'è®¾å¤‡ç±»å‹',
    region_id BIGINT NOT NULL COMMENT 'åŒºåŸŸID',
    online_status TINYINT DEFAULT 0 COMMENT 'åœ¨çº¿çŠ¶æ€',
    work_status TINYINT DEFAULT 0 COMMENT 'å·¥ä½œçŠ¶æ€',
    alarm_status TINYINT DEFAULT 0 COMMENT 'å‘Šè­¦çŠ¶æ€',
    last_online_time DATETIME COMMENT 'æœ€ååœ¨çº¿æ—¶é—´',
    created_time DATETIME DEFAULT CURRENT_TIMESTAMP,
    updated_time DATETIME DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,
    INDEX idx_device_type (device_type),
    INDEX idx_region_id (region_id),
    INDEX idx_online_status (online_status)
) COMMENT 'è®¾å¤‡ä¿¡æ¯è¡¨';

-- åŒºåŸŸä¿¡æ¯è¡¨
CREATE TABLE region_info (
    id BIGINT PRIMARY KEY AUTO_INCREMENT,
    region_code VARCHAR(50) UNIQUE NOT NULL COMMENT 'åŒºåŸŸç¼–ç ',
    region_name VARCHAR(100) NOT NULL COMMENT 'åŒºåŸŸåç§°',
    parent_id BIGINT DEFAULT 0 COMMENT 'çˆ¶åŒºåŸŸID',
    region_level TINYINT NOT NULL COMMENT 'åŒºåŸŸå±‚çº§',
    sort_order INT DEFAULT 0 COMMENT 'æ’åº',
    status TINYINT DEFAULT 1 COMMENT 'çŠ¶æ€',
    created_time DATETIME DEFAULT CURRENT_TIMESTAMP,
    updated_time DATETIME DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,
    INDEX idx_parent_id (parent_id),
    INDEX idx_region_level (region_level)
) COMMENT 'åŒºåŸŸä¿¡æ¯è¡¨';

-- ç”¨æˆ·ä¿¡æ¯è¡¨
CREATE TABLE user_info (
    id BIGINT PRIMARY KEY AUTO_INCREMENT,
    username VARCHAR(50) UNIQUE NOT NULL COMMENT 'ç”¨æˆ·å',
    password VARCHAR(100) NOT NULL COMMENT 'å¯†ç ',
    real_name VARCHAR(50) COMMENT 'çœŸå®å§“å',
    email VARCHAR(100) COMMENT 'é‚®ç®±',
    phone VARCHAR(20) COMMENT 'æ‰‹æœºå·',
    status TINYINT DEFAULT 1 COMMENT 'çŠ¶æ€',
    last_login_time DATETIME COMMENT 'æœ€åç™»å½•æ—¶é—´',
    created_time DATETIME DEFAULT CURRENT_TIMESTAMP,
    updated_time DATETIME DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,
    INDEX idx_username (username),
    INDEX idx_status (status)
) COMMENT 'ç”¨æˆ·ä¿¡æ¯è¡¨';
```

**ç›‘æ§æ•°æ®è¡¨**:
```sql
-- æµé‡ç›‘æ§è¡¨
CREATE TABLE flow_monitor (
    id BIGINT PRIMARY KEY AUTO_INCREMENT,
    device_id BIGINT NOT NULL COMMENT 'è®¾å¤‡ID',
    instant_flow DECIMAL(10,2) COMMENT 'ç¬æ—¶æµé‡',
    total_flow DECIMAL(15,2) COMMENT 'ç´¯è®¡æµé‡',
    flow_velocity DECIMAL(8,2) COMMENT 'æµé€Ÿ',
    temperature DECIMAL(6,2) COMMENT 'æ¸©åº¦',
    pressure DECIMAL(8,3) COMMENT 'å‹åŠ›',
    data_quality ENUM('GOOD', 'BAD', 'UNCERTAIN') DEFAULT 'GOOD' COMMENT 'æ•°æ®è´¨é‡',
    monitor_time DATETIME NOT NULL COMMENT 'ç›‘æµ‹æ—¶é—´',
    created_time DATETIME DEFAULT CURRENT_TIMESTAMP,
    INDEX idx_device_time (device_id, monitor_time),
    INDEX idx_monitor_time (monitor_time)
) COMMENT 'æµé‡ç›‘æ§è¡¨';

-- æ¶²ä½ç›‘æ§è¡¨
CREATE TABLE level_monitor (
    id BIGINT PRIMARY KEY AUTO_INCREMENT,
    device_id BIGINT NOT NULL COMMENT 'è®¾å¤‡ID',
    current_level DECIMAL(8,2) COMMENT 'å½“å‰æ¶²ä½',
    max_level DECIMAL(8,2) COMMENT 'æœ€å¤§æ¶²ä½',
    level_percent DECIMAL(5,2) COMMENT 'æ¶²ä½ç™¾åˆ†æ¯”',
    volume DECIMAL(12,2) COMMENT 'ä½“ç§¯',
    temperature DECIMAL(6,2) COMMENT 'æ¸©åº¦',
    density DECIMAL(6,3) COMMENT 'å¯†åº¦',
    alarm_status ENUM('NORMAL', 'LOW', 'HIGH', 'CRITICAL') DEFAULT 'NORMAL' COMMENT 'å‘Šè­¦çŠ¶æ€',
    monitor_time DATETIME NOT NULL COMMENT 'ç›‘æµ‹æ—¶é—´',
    created_time DATETIME DEFAULT CURRENT_TIMESTAMP,
    INDEX idx_device_time (device_id, monitor_time),
    INDEX idx_monitor_time (monitor_time)
) COMMENT 'æ¶²ä½ç›‘æ§è¡¨';
```

#### ç¼“å­˜æ•°æ®åº“ (Redis)

**ç¼“å­˜ç­–ç•¥**:
```
# è®¾å¤‡çŠ¶æ€ç¼“å­˜ (TTL: 5åˆ†é’Ÿ)
device:status:{deviceId} -> {
    "onlineStatus": 1,
    "workStatus": 1,
    "alarmStatus": 0,
    "lastUpdateTime": "2025-06-25 10:00:00"
}

# å®æ—¶æ•°æ®ç¼“å­˜ (TTL: 1åˆ†é’Ÿ)
device:realtime:{deviceId} -> {
    "instantFlow": 125.5,
    "currentLevel": 3.2,
    "temperature": 22.5,
    "timestamp": "2025-06-25 10:00:00"
}

# ç”¨æˆ·ä¼šè¯ç¼“å­˜ (TTL: 2å°æ—¶)
user:session:{token} -> {
    "userId": 1,
    "username": "admin",
    "permissions": ["device:read", "data:read"]
}

# API é™æµç¼“å­˜ (TTL: 1åˆ†é’Ÿ)
api:ratelimit:{ip}:{endpoint} -> count

# ç»Ÿè®¡æ•°æ®ç¼“å­˜ (TTL: 10åˆ†é’Ÿ)
stats:device:count -> {
    "total": 100,
    "online": 95,
    "offline": 5,
    "alarm": 3
}
```

#### æ—¶åºæ•°æ®åº“ (InfluxDB)

**æ•°æ®æ¨¡å‹**:
```
# è®¾å¤‡ç›‘æ§æ•°æ®
measurement: device_metrics
tags:
  - device_id
  - device_type
  - region_id
fields:
  - instant_flow (float)
  - total_flow (float)
  - current_level (float)
  - temperature (float)
  - pressure (float)
  - online_status (integer)
  - work_status (integer)
timestamp: RFC3339

# èƒ½è€—æ•°æ®
measurement: energy_consumption
tags:
  - device_id
  - energy_type
  - region_id
fields:
  - power_consumption (float)
  - energy_efficiency (float)
  - cost (float)
timestamp: RFC3339
```

### æ•°æ®æµå‘

```mermaid
flowchart TD
    A[è®¾å¤‡æ•°æ®] --> B[æ•°æ®é‡‡é›†ç½‘å…³]
    B --> C{æ•°æ®éªŒè¯}
    C -->|æœ‰æ•ˆ| D[å®æ—¶æ•°æ®å¤„ç†]
    C -->|æ— æ•ˆ| E[é”™è¯¯æ—¥å¿—]
    
    D --> F[Redis ç¼“å­˜]
    D --> G[InfluxDB å­˜å‚¨]
    D --> H[MySQL ä¸šåŠ¡æ•°æ®]
    
    F --> I[å®æ—¶ç›‘æ§]
    G --> J[å†å²æŸ¥è¯¢]
    H --> K[ä¸šåŠ¡é€»è¾‘]
    
    I --> L[å‘Šè­¦ç³»ç»Ÿ]
    J --> M[æ•°æ®åˆ†æ]
    K --> N[è®¾å¤‡ç®¡ç†]
```

## ğŸ”Œ æ¥å£è®¾è®¡

### RESTful API è®¾è®¡åŸåˆ™

**URL è®¾è®¡è§„èŒƒ**:
```
# èµ„æºå‘½å
GET    /api/devices              # è·å–è®¾å¤‡åˆ—è¡¨
GET    /api/devices/{id}         # è·å–è®¾å¤‡è¯¦æƒ…
POST   /api/devices              # åˆ›å»ºè®¾å¤‡
PUT    /api/devices/{id}         # æ›´æ–°è®¾å¤‡
DELETE /api/devices/{id}         # åˆ é™¤è®¾å¤‡

# å­èµ„æº
GET    /api/devices/{id}/data    # è·å–è®¾å¤‡æ•°æ®
POST   /api/devices/{id}/control # æ§åˆ¶è®¾å¤‡

# æŸ¥è¯¢å‚æ•°
GET    /api/devices?page=1&size=10&type=PUMP&region=1
```

**å“åº”æ ¼å¼æ ‡å‡†**:
```json
{
  "code": 200,
  "msg": "success",
  "data": {
    "records": [],
    "total": 100,
    "current": 1,
    "pages": 10
  },
  "timestamp": "2025-06-25T10:00:00Z"
}
```

### è®¾å¤‡åè®®æ¥å£

**MQTT åè®®**:
```
# ä¸»é¢˜ç»“æ„
seh/{region_id}/{device_type}/{device_id}/{data_type}

# ç¤ºä¾‹
seh/1/pump/001/data          # è®¾å¤‡æ•°æ®ä¸ŠæŠ¥
seh/1/pump/001/status        # è®¾å¤‡çŠ¶æ€ä¸ŠæŠ¥
seh/1/pump/001/alarm         # è®¾å¤‡å‘Šè­¦ä¸ŠæŠ¥
seh/1/pump/001/control       # è®¾å¤‡æ§åˆ¶æŒ‡ä»¤

# æ•°æ®æ ¼å¼
{
  "deviceId": "001",
  "timestamp": "2025-06-25T10:00:00Z",
  "data": {
    "instantFlow": 125.5,
    "totalFlow": 1250.8,
    "temperature": 22.5,
    "pressure": 0.45
  }
}
```

**HTTP åè®®**:
```http
POST /api/device/data
Content-Type: application/json
Authorization: Device {device_token}

{
  "deviceId": "PUMP_001",
  "timestamp": "2025-06-25T10:00:00Z",
  "metrics": [
    {
      "name": "instant_flow",
      "value": 125.5,
      "unit": "L/min"
    },
    {
      "name": "temperature",
      "value": 22.5,
      "unit": "Â°C"
    }
  ]
}
```

## ğŸ” å®‰å…¨æ¶æ„

### è®¤è¯æˆæƒä½“ç³»

```mermaid
flowchart TD
    A[ç”¨æˆ·ç™»å½•] --> B[Sa-Token è®¤è¯]
    B --> C{è®¤è¯æˆåŠŸ?}
    C -->|æ˜¯| D[ç”Ÿæˆ Token]
    C -->|å¦| E[è¿”å›é”™è¯¯]
    
    D --> F[Token å­˜å‚¨åˆ° Redis]
    F --> G[è¿”å› Token ç»™å®¢æˆ·ç«¯]
    
    H[API è¯·æ±‚] --> I[Token éªŒè¯]
    I --> J{Token æœ‰æ•ˆ?}
    J -->|æ˜¯| K[æƒé™æ£€æŸ¥]
    J -->|å¦| L[è¿”å› 401]
    
    K --> M{æƒé™è¶³å¤Ÿ?}
    M -->|æ˜¯| N[æ‰§è¡Œä¸šåŠ¡é€»è¾‘]
    M -->|å¦| O[è¿”å› 403]
```

### æƒé™æ¨¡å‹

**RBAC æƒé™æ¨¡å‹**:
```
ç”¨æˆ· (User) â†â†’ è§’è‰² (Role) â†â†’ æƒé™ (Permission)

# æƒé™å®šä¹‰
device:read          # è®¾å¤‡æŸ¥çœ‹
device:write         # è®¾å¤‡æ“ä½œ
device:delete        # è®¾å¤‡åˆ é™¤
data:read            # æ•°æ®æŸ¥çœ‹
data:export          # æ•°æ®å¯¼å‡º
system:admin         # ç³»ç»Ÿç®¡ç†

# è§’è‰²å®šä¹‰
ADMIN               # ç³»ç»Ÿç®¡ç†å‘˜ (æ‰€æœ‰æƒé™)
OPERATOR            # æ“ä½œå‘˜ (è®¾å¤‡æ“ä½œæƒé™)
VIEWER              # æŸ¥çœ‹è€… (åªè¯»æƒé™)
GUEST               # è®¿å®¢ (åŸºç¡€æŸ¥çœ‹æƒé™)
```

### æ•°æ®å®‰å…¨

**æ•æ„Ÿæ•°æ®åŠ å¯†**:
```java
// æ•°æ®åº“å¯†ç åŠ å¯†
@Component
public class PasswordEncoder {
    public String encode(String password) {
        return BCrypt.hashpw(password, BCrypt.gensalt());
    }
    
    public boolean matches(String password, String encoded) {
        return BCrypt.checkpw(password, encoded);
    }
}

// æ•æ„Ÿå­—æ®µåŠ å¯†
@Entity
public class UserInfo {
    @Encrypted
    private String phone;
    
    @Encrypted
    private String email;
}
```

**API å®‰å…¨é˜²æŠ¤**:
```java
// é™æµé…ç½®
@RateLimiter(value = 100, window = 60) // æ¯åˆ†é’Ÿ100æ¬¡
public class DeviceController {
    
    @PostMapping("/devices")
    @PreAuthorize("hasPermission('device:write')")
    public Result createDevice(@Valid @RequestBody DeviceCreateRequest request) {
        // ä¸šåŠ¡é€»è¾‘
    }
}

// XSS é˜²æŠ¤
@Component
public class XssFilter implements Filter {
    @Override
    public void doFilter(ServletRequest request, ServletResponse response, FilterChain chain) {
        HttpServletRequest httpRequest = (HttpServletRequest) request;
        XssHttpServletRequestWrapper wrapper = new XssHttpServletRequestWrapper(httpRequest);
        chain.doFilter(wrapper, response);
    }
}
```

## âš¡ æ€§èƒ½ä¼˜åŒ–

### ç¼“å­˜ç­–ç•¥

**å¤šçº§ç¼“å­˜æ¶æ„**:
```
L1: æœ¬åœ°ç¼“å­˜ (Caffeine)
â”œâ”€â”€ çƒ­ç‚¹æ•°æ®ç¼“å­˜ (1000æ¡, TTL: 5åˆ†é’Ÿ)
â””â”€â”€ é…ç½®æ•°æ®ç¼“å­˜ (100æ¡, TTL: 30åˆ†é’Ÿ)

L2: åˆ†å¸ƒå¼ç¼“å­˜ (Redis)
â”œâ”€â”€ ç”¨æˆ·ä¼šè¯ç¼“å­˜ (TTL: 2å°æ—¶)
â”œâ”€â”€ è®¾å¤‡çŠ¶æ€ç¼“å­˜ (TTL: 5åˆ†é’Ÿ)
â”œâ”€â”€ å®æ—¶æ•°æ®ç¼“å­˜ (TTL: 1åˆ†é’Ÿ)
â””â”€â”€ æŸ¥è¯¢ç»“æœç¼“å­˜ (TTL: 10åˆ†é’Ÿ)

L3: æ•°æ®åº“æŸ¥è¯¢ä¼˜åŒ–
â”œâ”€â”€ ç´¢å¼•ä¼˜åŒ–
â”œâ”€â”€ æŸ¥è¯¢ä¼˜åŒ–
â””â”€â”€ è¿æ¥æ± ä¼˜åŒ–
```

**ç¼“å­˜æ›´æ–°ç­–ç•¥**:
```java
@Service
public class DeviceService {
    
    @Cacheable(value = "device", key = "#id")
    public Device getDevice(Long id) {
        return deviceMapper.selectById(id);
    }
    
    @CacheEvict(value = "device", key = "#device.id")
    public void updateDevice(Device device) {
        deviceMapper.updateById(device);
        // åŒæ­¥æ›´æ–° Redis
        redisTemplate.opsForValue().set(
            "device:" + device.getId(), 
            device, 
            Duration.ofMinutes(5)
        );
    }
}
```

### æ•°æ®åº“ä¼˜åŒ–

**åˆ†åº“åˆ†è¡¨ç­–ç•¥**:
```sql
-- æŒ‰è®¾å¤‡ç±»å‹åˆ†è¡¨
CREATE TABLE flow_monitor_pump LIKE flow_monitor;
CREATE TABLE flow_monitor_lighting LIKE flow_monitor;
CREATE TABLE flow_monitor_sensor LIKE flow_monitor;

-- æŒ‰æ—¶é—´åˆ†è¡¨ (æœˆè¡¨)
CREATE TABLE flow_monitor_202506 LIKE flow_monitor;
CREATE TABLE flow_monitor_202507 LIKE flow_monitor;

-- åˆ†è¡¨è·¯ç”±è§„åˆ™
@Component
public class TableShardingAlgorithm {
    public String getTableName(String logicTable, String deviceType, Date date) {
        String suffix = deviceType.toLowerCase() + "_" + 
                       DateUtil.format(date, "yyyyMM");
        return logicTable + "_" + suffix;
    }
}
```

**ç´¢å¼•ä¼˜åŒ–**:
```sql
-- å¤åˆç´¢å¼•
CREATE INDEX idx_device_time_type ON flow_monitor (device_id, monitor_time, device_type);

-- è¦†ç›–ç´¢å¼•
CREATE INDEX idx_device_flow_cover ON flow_monitor (device_id, monitor_time) 
INCLUDE (instant_flow, total_flow, temperature);

-- åˆ†åŒºç´¢å¼•
ALTER TABLE flow_monitor PARTITION BY RANGE (YEAR(monitor_time)) (
    PARTITION p2024 VALUES LESS THAN (2025),
    PARTITION p2025 VALUES LESS THAN (2026),
    PARTITION p2026 VALUES LESS THAN (2027)
);
```

### å¼‚æ­¥å¤„ç†

**æ¶ˆæ¯é˜Ÿåˆ—æ¶æ„**:
```java
// å¼‚æ­¥æ•°æ®å¤„ç†
@Component
public class DataProcessor {
    
    @Async("dataProcessorExecutor")
    @EventListener
    public void handleDeviceData(DeviceDataEvent event) {
        // æ•°æ®éªŒè¯
        validateData(event.getData());
        
        // æ•°æ®å­˜å‚¨
        saveToDatabase(event.getData());
        
        // å®æ—¶åˆ†æ
        analyzeData(event.getData());
        
        // å‘Šè­¦æ£€æŸ¥
        checkAlarms(event.getData());
    }
}

// çº¿ç¨‹æ± é…ç½®
@Configuration
@EnableAsync
public class AsyncConfig {
    
    @Bean("dataProcessorExecutor")
    public Executor dataProcessorExecutor() {
        ThreadPoolTaskExecutor executor = new ThreadPoolTaskExecutor();
        executor.setCorePoolSize(10);
        executor.setMaxPoolSize(20);
        executor.setQueueCapacity(1000);
        executor.setThreadNamePrefix("DataProcessor-");
        executor.setRejectedExecutionHandler(new ThreadPoolExecutor.CallerRunsPolicy());
        return executor;
    }
}
```

## ğŸ“Š ç›‘æ§ä½“ç³»

### åº”ç”¨ç›‘æ§

**æŒ‡æ ‡æ”¶é›†**:
```java
// è‡ªå®šä¹‰æŒ‡æ ‡
@Component
public class MetricsCollector {
    
    private final MeterRegistry meterRegistry;
    private final Counter deviceDataCounter;
    private final Timer apiResponseTimer;
    
    public MetricsCollector(MeterRegistry meterRegistry) {
        this.meterRegistry = meterRegistry;
        this.deviceDataCounter = Counter.builder("device.data.received")
            .description("Number of device data received")
            .register(meterRegistry);
        this.apiResponseTimer = Timer.builder("api.response.time")
            .description("API response time")
            .register(meterRegistry);
    }
    
    public void recordDeviceData(String deviceType) {
        deviceDataCounter.increment(Tags.of("type", deviceType));
    }
    
    public void recordApiResponse(String endpoint, Duration duration) {
        apiResponseTimer.record(duration, Tags.of("endpoint", endpoint));
    }
}
```

**å¥åº·æ£€æŸ¥**:
```java
@Component
public class CustomHealthIndicator implements HealthIndicator {
    
    @Override
    public Health health() {
        // æ£€æŸ¥æ•°æ®åº“è¿æ¥
        if (!isDatabaseHealthy()) {
            return Health.down()
                .withDetail("database", "Connection failed")
                .build();
        }
        
        // æ£€æŸ¥ Redis è¿æ¥
        if (!isRedisHealthy()) {
            return Health.down()
                .withDetail("redis", "Connection failed")
                .build();
        }
        
        // æ£€æŸ¥è®¾å¤‡è¿æ¥æ•°
        long deviceCount = getOnlineDeviceCount();
        return Health.up()
            .withDetail("database", "OK")
            .withDetail("redis", "OK")
            .withDetail("onlineDevices", deviceCount)
            .build();
    }
}
```

### æ—¥å¿—ä½“ç³»

**æ—¥å¿—é…ç½®**:
```xml
<!-- logback-spring.xml -->
<configuration>
    <!-- æ§åˆ¶å°è¾“å‡º -->
    <appender name="CONSOLE" class="ch.qos.logback.core.ConsoleAppender">
        <encoder class="net.logstash.logback.encoder.LoggingEventCompositeJsonEncoder">
            <providers>
                <timestamp/>
                <logLevel/>
                <loggerName/>
                <message/>
                <mdc/>
                <stackTrace/>
            </providers>
        </encoder>
    </appender>
    
    <!-- æ–‡ä»¶è¾“å‡º -->
    <appender name="FILE" class="ch.qos.logback.core.rolling.RollingFileAppender">
        <file>logs/seh.log</file>
        <rollingPolicy class="ch.qos.logback.core.rolling.TimeBasedRollingPolicy">
            <fileNamePattern>logs/seh.%d{yyyy-MM-dd}.%i.log.gz</fileNamePattern>
            <maxFileSize>100MB</maxFileSize>
            <maxHistory>30</maxHistory>
            <totalSizeCap>10GB</totalSizeCap>
        </rollingPolicy>
        <encoder class="net.logstash.logback.encoder.LoggingEventCompositeJsonEncoder">
            <providers>
                <timestamp/>
                <logLevel/>
                <loggerName/>
                <message/>
                <mdc/>
                <stackTrace/>
            </providers>
        </encoder>
    </appender>
    
    <root level="INFO">
        <appender-ref ref="CONSOLE"/>
        <appender-ref ref="FILE"/>
    </root>
</configuration>
```

**é“¾è·¯è¿½è¸ª**:
```java
@Component
public class TraceFilter implements Filter {
    
    @Override
    public void doFilter(ServletRequest request, ServletResponse response, FilterChain chain) {
        String traceId = UUID.randomUUID().toString().replace("-", "");
        MDC.put("traceId", traceId);
        
        try {
            chain.doFilter(request, response);
        } finally {
            MDC.clear();
        }
    }
}
```

## ğŸš€ æ‰©å±•æ€§è®¾è®¡

### å¾®æœåŠ¡æ‹†åˆ†

**æœåŠ¡æ‹†åˆ†ç­–ç•¥**:
```
# æŒ‰ä¸šåŠ¡åŸŸæ‹†åˆ†
seh-user-service          # ç”¨æˆ·æœåŠ¡
seh-device-service        # è®¾å¤‡æœåŠ¡
seh-data-service          # æ•°æ®æœåŠ¡
seh-energy-service        # èƒ½æºæœåŠ¡
seh-notification-service  # é€šçŸ¥æœåŠ¡
seh-gateway-service       # ç½‘å…³æœåŠ¡

# æŒ‰æŠ€æœ¯èŒè´£æ‹†åˆ†
seh-config-service        # é…ç½®ä¸­å¿ƒ
seh-registry-service      # æœåŠ¡æ³¨å†Œä¸­å¿ƒ
seh-monitor-service       # ç›‘æ§æœåŠ¡
seh-log-service          # æ—¥å¿—æœåŠ¡
```

**æœåŠ¡é€šä¿¡**:
```java
// æœåŠ¡é—´è°ƒç”¨
@FeignClient(name = "device-service")
public interface DeviceServiceClient {
    
    @GetMapping("/api/devices/{id}")
    Result<Device> getDevice(@PathVariable Long id);
    
    @PostMapping("/api/devices/{id}/control")
    Result<Void> controlDevice(@PathVariable Long id, @RequestBody ControlCommand command);
}

// å¼‚æ­¥æ¶ˆæ¯é€šä¿¡
@Component
public class DeviceEventPublisher {
    
    @Autowired
    private RabbitTemplate rabbitTemplate;
    
    public void publishDeviceStatusChange(DeviceStatusChangeEvent event) {
        rabbitTemplate.convertAndSend(
            "device.exchange", 
            "device.status.changed", 
            event
        );
    }
}
```

### æ’ä»¶åŒ–æ¶æ„

**è®¾å¤‡åè®®æ’ä»¶**:
```java
// åè®®æ’ä»¶æ¥å£
public interface DeviceProtocolPlugin {
    String getProtocolName();
    boolean supports(String deviceType);
    DeviceData parseData(byte[] rawData);
    byte[] encodeCommand(ControlCommand command);
}

// åè®®æ’ä»¶ç®¡ç†å™¨
@Component
public class ProtocolPluginManager {
    
    private final Map<String, DeviceProtocolPlugin> plugins = new HashMap<>();
    
    @PostConstruct
    public void loadPlugins() {
        // æ‰«æå¹¶åŠ è½½åè®®æ’ä»¶
        ServiceLoader<DeviceProtocolPlugin> loader = 
            ServiceLoader.load(DeviceProtocolPlugin.class);
        
        for (DeviceProtocolPlugin plugin : loader) {
            plugins.put(plugin.getProtocolName(), plugin);
        }
    }
    
    public DeviceProtocolPlugin getPlugin(String protocolName) {
        return plugins.get(protocolName);
    }
}
```

## ğŸ“ˆ å®¹é‡è§„åˆ’

### æ€§èƒ½æŒ‡æ ‡

| æŒ‡æ ‡ | ç›®æ ‡å€¼ | ç›‘æ§æ–¹å¼ |
|------|--------|----------|
| API å“åº”æ—¶é—´ | < 200ms | Prometheus + Grafana |
| æ•°æ®åº“è¿æ¥æ•° | < 80% | MySQL ç›‘æ§ |
| å†…å­˜ä½¿ç”¨ç‡ | < 80% | JVM ç›‘æ§ |
| CPU ä½¿ç”¨ç‡ | < 70% | ç³»ç»Ÿç›‘æ§ |
| ç£ç›˜ä½¿ç”¨ç‡ | < 85% | ç³»ç»Ÿç›‘æ§ |
| ç½‘ç»œå¸¦å®½ | < 80% | ç½‘ç»œç›‘æ§ |

### æ‰©å®¹ç­–ç•¥

**æ°´å¹³æ‰©å®¹**:
```yaml
# Kubernetes è‡ªåŠ¨æ‰©å®¹é…ç½®
apiVersion: autoscaling/v2
kind: HorizontalPodAutoscaler
metadata:
  name: seh-app-hpa
spec:
  scaleTargetRef:
    apiVersion: apps/v1
    kind: Deployment
    name: seh-app
  minReplicas: 2
  maxReplicas: 10
  metrics:
  - type: Resource
    resource:
      name: cpu
      target:
        type: Utilization
        averageUtilization: 70
  - type: Resource
    resource:
      name: memory
      target:
        type: Utilization
        averageUtilization: 80
```

**å‚ç›´æ‰©å®¹**:
```yaml
# èµ„æºé…ç½®
resources:
  requests:
    memory: "1Gi"
    cpu: "500m"
  limits:
    memory: "2Gi"
    cpu: "1000m"
```

## ğŸ”„ æ¼”è¿›è·¯çº¿

### æŠ€æœ¯æ¼”è¿›

**Phase 1: å•ä½“åº”ç”¨** (å½“å‰)
- Spring Boot å•ä½“æ¶æ„
- MySQL + Redis æ•°æ®å­˜å‚¨
- åŸºç¡€ç›‘æ§å’Œæ—¥å¿—

**Phase 2: æœåŠ¡åŒ–æ”¹é€ ** (6ä¸ªæœˆå†…)
- å¾®æœåŠ¡æ‹†åˆ†
- æœåŠ¡æ³¨å†Œä¸å‘ç°
- é…ç½®ä¸­å¿ƒ
- API ç½‘å…³

**Phase 3: äº‘åŸç”Ÿ** (12ä¸ªæœˆå†…)
- Kubernetes éƒ¨ç½²
- æœåŠ¡ç½‘æ ¼ (Istio)
- å¯è§‚æµ‹æ€§å¹³å°
- DevOps æµæ°´çº¿

**Phase 4: æ™ºèƒ½åŒ–** (18ä¸ªæœˆå†…)
- AI/ML æ•°æ®åˆ†æ
- æ™ºèƒ½å‘Šè­¦
- è‡ªåŠ¨åŒ–è¿ç»´
- è¾¹ç¼˜è®¡ç®—

### æ¶æ„æ¼”è¿›

```mermaid
graph TD
    A[å•ä½“æ¶æ„] --> B[å¾®æœåŠ¡æ¶æ„]
    B --> C[äº‘åŸç”Ÿæ¶æ„]
    C --> D[æ™ºèƒ½åŒ–æ¶æ„]
    
    A1[Spring Boot] --> B1[Spring Cloud]
    B1 --> C1[Kubernetes]
    C1 --> D1[AI/ML Platform]
    
    A2[MySQL/Redis] --> B2[åˆ†å¸ƒå¼æ•°æ®åº“]
    B2 --> C2[äº‘æ•°æ®åº“]
    C2 --> D2[æ•°æ®æ¹–/æ•°æ®ä¸­å°]
```

---

## ğŸ“ æŠ€æœ¯æ”¯æŒ

- **æ¶æ„è®¨è®º**: [GitHub Discussions](https://github.com/your-username/smart-energy-hub/discussions)
- **æŠ€æœ¯é—®é¢˜**: [GitHub Issues](https://github.com/your-username/smart-energy-hub/issues)
- **æ¶æ„è¯„å®¡**: architecture@yourdomain.com

---

**æ³¨æ„**: æœ¬æ¶æ„æ–‡æ¡£ä¼šéšç€é¡¹ç›®å‘å±•æŒç»­æ›´æ–°ï¼Œè¯·å…³æ³¨ç‰ˆæœ¬å˜æ›´ã€‚